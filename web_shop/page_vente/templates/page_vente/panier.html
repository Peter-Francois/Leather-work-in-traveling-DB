{% extends 'page_vente/base.html' %}
{% load static %}
{% load i18n %}
{% block meta-description %}{% trans "V√©rifiez votre panier et passez commande en toute s√©curit√© via Stripe. Profitez de la livraison rapide pour recevoir vos cr√©ations en maroquinerie et macram√© faits main." %}{% endblock %}
{% block title %}{% trans "Panier - Commande s√©curis√©e en maroquinerie et macram√©" %}{% endblock %}
{% block head %}
    <!-- Balises hreflang pour la page actuelle -->
    {% get_current_language as current_language %}
    <link rel="alternate" href="https://leatherworkintravelingdb.com{{ request.path }}" hreflang="{{ current_language }}" />
    {% if current_language == "fr" %}
        <link rel="alternate" href="https://leatherworkintravelingdb.com/en/cart/" hreflang="en" />
    {% elif current_language == "en" %}
        <link rel="alternate" href="https://leatherworkintravelingdb.com/fr/panier/" hreflang="fr" />
    {% endif %}
    <meta name="robots" content="noindex, follow">
{% endblock %}
{% block header %}
<h1 id="title_cart">{% trans "Votre panier - V√©rifiez et finalisez votre commande" %}</h1>
{% endblock %}
{% block description %}
{% endblock %}
{% block content %}
{% if items %}
<section class="cart-container">
    
    <button class="align-items-center page-button font-size-17 clean-button" id="clear_cart" >{% trans "Vider le panier" %}</button>
        {% if expiration_date %}
            <p ><span id="expiration_date">‚ö†Ô∏è {% trans "Votre panier expirera le" %} </span>{{ expiration_date|date:"d/m/Y H:i" }}.</p>
        {% else %}
            <p id="expiration_soon">‚ö†Ô∏è {% trans "Votre panier expirera bient√¥t." %}</p>
        {% endif %}
    <div class="grid-container">
        
        <ul class="product-list-cart" id="liste-articles"></ul>
        {% if items %}
        <aside class="text-center">
            <h2 id="payment_title">{% trans "Paiement s√©curis√©" %}</h2>

            <p><span id="shipping_cost">‚úÖ {% trans "Les frais de port sont fixes √† 5 ‚Ç¨" %}</span> <span id="insurance_25_euros">{% trans "et incluent une assurance jusqu'√† 25 ‚Ç¨" %}</span></p>
            <div id="shipping-option">
                <input type="checkbox" id="add-shipping"> 
                <label class="font-size-17" for="add-shipping" id="add-shipping-label">{% trans "Option de livraison √† domicile" %} (+5,00 ‚Ç¨)</label>
            </div>
            <p id="mandatory-insurance" class="hidden"><span id="mandatory_insurance_2">üö® {% trans "Une assurance obligatoire de" %} </span><span id="mandatory-insurance-cost">0</span><span id="mandatory_insurance_3"> ‚Ç¨ ({% trans "montant variable selon le montant de la commande. Plus d'information sur la page" %} <a href="/cgv" target="_blank">CGV</a>) {% trans "sera ajout√©e pour les commandes comprise entre" %} 50 ‚Ç¨ {% trans "et" %} 500 ‚Ç¨.</span><span id="mandatory_insurance_4"><br><br>‚ö†Ô∏è {% trans "L'indemnisation forfaitaire maximal est de 500 ‚Ç¨" %}‚ö†Ô∏è</span></p>
            <div class="separator-cart"></div>
            <p id="total_articles"><span id="total_articles_title">{% trans "Total des articles :" %} </span><span id="order-total">{{total | floatformat:2 }}</span> ‚Ç¨</p>
            <p id="shipping_cost_short">{% trans "Frais de port :" %} <span id="shipping-cost">5.00 ‚Ç¨</span></p>
            
            <p id="insurance"><span id="insurance_cost">{% trans "Assurance :" %} </span><span id="insurance-cost">0.00</span> ‚Ç¨<span id="insurance_25_euros_2" ><br>{% trans "Inclue (jusqu'√† 25 ‚Ç¨)" %}</span></p>
            <div id="insurance-option" class="hidden">
                <input type="checkbox" id="add-insurance"> 
                <label class="font-size-17" for="add-insurance" id="add-insurance-label">{% trans "Assurer la totalit√© de la valeur des produits" %} (+2,00 ‚Ç¨)</label>
            </div>
            <div class="separator-cart"></div>
            <p><span id="total_amount_title">{% trans "Total de la commande :" %} </span><span id="total-amount">0</span> ‚Ç¨</p>
            <p>
              <input type="checkbox" id="accept-cgv"> 
              <label for="accept-cgv" ><span id="accept-cgv-label">{% trans "J'accepte les" %} <a href="/cgv" target="_blank">{% trans "conditions g√©n√©rales de vente" %}</a>.</span>({{ latest_cgv.version }})</label>
            </p>
            <button class="page-button" id="checkout">{% trans "Payer via Stripe" %}</button>
          
            <p id="error-message" class="error hidden">{% trans "Vous devez accepter les CGV pour continuer." %}</p>
        </aside>
    {% endif %}    
    
    </div>
        {% if expiration_date %}
            <p ><span id="expiration_date">‚ö†Ô∏è {% trans "Votre panier expirera le" %} </span>{{ expiration_date|date:"d/m/Y H:i" }}.</p>
        {% else %}
            <p id="expiration_soon">‚ö†Ô∏è {% trans "Votre panier expirera bient√¥t." %}</p>
        {% endif %}
</section>
{% endif %}
<section id="empty-section">
    <p id="empty_cart">{% trans "Votre panier est vide." %}</p>
</section>


<div id="modal">
    <h2 class="text-center" id="nom-article"></h2>
    <button id="close-button" type="button">&times;</button>
    <div class="grid-container">
        <div class="product-info">
            <h3 id="info-description">Description :</h3>
            <p id="description-article"></p>
            <h3 id="info-price">{% trans "Prix: " %}</h3>
            <p id="prix-article"></p>
        </div>
        <div class="image-container">
            <img id="current-image" src="" alt="Image du produit">
            <div class="image-buttons">
                <button class="font-size-17" id="prev-button" type="button">{% trans "Pr√©c√©dent" %}</button>
                <button class="font-size-17" id="next-button" type="button">{% trans "Suivant" %}</button>
            </div>
        </div>
    </div>
</div>
</div>
<script id="translations" type="application/json">
    {
        "delete_button": "{% trans 'Supprimer' %}",
        "no_image": "{% trans 'Aucune image disponible' %}",
        "price": "{% trans 'Prix: ' %}"
    }
</script>
{% endblock %}